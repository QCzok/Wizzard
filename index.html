<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wizard</title>
    <style>
        #banner{
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url("https://allesebike.de/cdn/shop/files/ShopBanner.png?v=1690142813&width=2000");
            background-color: #cccccc;
            background-repeat: no-repeat;
            background-size: cover;
        }
        #wizard {
            margin: 20px;
            background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white background */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Subtle box shadow */
            max-width: 1200px; /* Set maximum width for wizard */
        }
        .header {
            font-size: 35px;
            margin-bottom: 20px;
            text-align: center;
            color: #555555;
            font-family: sans-serif;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Subtle box shadow */
        }
        #options{
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            text-overflow: ellipsis;
        }
        #options:last-child {
    margin-left: 0; /* Remove margin for the last element */
}
       .panel {
            display: flex;
            align-items: center;
            justify-content: end;
            flex-direction: column;
            margin: 10px;
            padding: 10px;
            border: 1px solid snow;
            border-radius: 10px;
            background-color: snow;
            width: 8rem;;
            height: 8rem;
        }
        .logo {
            height: auto;
            width: 80%;
            object-fit: contain;
            flex-grow: 40;
        }
        #label {
            color: #555555;
            font-size: 12px;
            font-family: sans-serif;
            word-break: break-all;
            overflow: hidden; 
            margin: 0;
        }
        @media screen and (max-width: 480px) {
            #options{
                flex-direction: row;
            }
            #wizard {
                margin: 10px;
                padding: 10px;
            }
            .panel {
                width: 6rem;;
                height: 6rem;
            }
            .header {
                font-size: 28px;
        }
        }
    </style>
</head>
<body>
    <div id="banner">
        <div id="wizard">
            <div class="header">
                <p id="question">Schnellauswahl-Assistent: Welche Marke hat ihr E-Bike?</p>
            </div>
            <div id="options"></div>
        </div>
    </div>

    <script>
                // Parse the JSON data
                var jsonData = {
            "SectionContent": {
    "title": "Tuning-Auswahl Assistent",
    "GridElementsArray": [
          { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Bosch_logo.png",
            "target": 
              {"SectionContent": {
                "title": "Welche Bosch Generation?",
                "GridElementsArray": [
                { "imageSource": "http://remar-sport.pl/531-thickbox_default/wyswietlacz-bosch-hmi.jpg",
                  "text":"Calssic / Gen1",
                  "target": "https://allesebike.de/products/bosch-gen-1-4-tuning-yolobox-pro-50-km-h-ein-und-ausschaltbar"},
                  { "imageSource": "https://i.ebayimg.com/images/g/lNMAAOSwgbliwlE2/s-l1600.jpg",
                  "target": "https://allesebike.de/products/yamaha-giant-neue-motoren-tuning-yolobox-50-km-h"},
                  { "imageSource": "https://www.offbeatbikes.co.uk/wp-content/uploads/2023/03/Bosch-eBike-smart-system-MY22-EN_CMYK_left-2048x893.jpg",
                    "target": "https://en.wikipedia.org/wiki/Bosch_(company)"},
                  { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/Chefferie_of_Bafang_-_panoramio.jpg/1280px-Chefferie_of_Bafang_-_panoramio.jpg",
                    "text": "lalala lalalal lalala hi lol",
                    "target": "ReturnAction"},
                  { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Bosch_logo.png",
                    "text": "Ein/Ausschaltbar ß?!",
                    "target":"https://allesebike.de/products/bosch-gen-1-4-tuning-yolobox-pro-50-km-h-ein-und-ausschaltbar"}
              ]
              }}
          },
            { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Yamaha-Logo.png",
            "target": "https://allesebike.de/products/yamaha-giant-neue-motoren-tuning-yolobox-50-km-h"},
            { "imageSource": "https://www.clker.com/cliparts/Q/d/l/A/K/L/shop-online-button-md.png",
              "target": "ReturnAction",
              "text": "zurück"},
            { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/Chefferie_of_Bafang_-_panoramio.jpg/1280px-Chefferie_of_Bafang_-_panoramio.jpg",
              "text": "lalala lalalal lalala hi lol",
              "target": "https://allesebike.de/products/bafang-ebike-tuning-yolobox-50-km-h-fur-3-pin-speed-sensor"},
            { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Bosch_logo.png",
              "text": "Ein/Ausschaltbar ß?!",
              "target":"https://allesebike.de/products/bosch-gen-1-4-tuning-yolobox-pro-50-km-h-ein-und-ausschaltbar"}
        ], 
  "SpaceConstrainedGridElementsArray": [
    { "imageSource": "https://www.clker.com/cliparts/Q/d/l/A/K/L/shop-online-button-md.png",
      "text":"Hier klicken um zu beginnen...",
      "target": 
        {"SectionContent": {
          "title": "Welche Marke hat der Antrieb des Fahrrads?",
          "GridElementsArray": [
          { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Bosch_logo.png",
            "target": 
              {"SectionContent": {
                "title": "Welche Bosch Generation?",
                "GridElementsArray": [
                { "imageSource": "http://remar-sport.pl/531-thickbox_default/wyswietlacz-bosch-hmi.jpg",
                  "text":"Calssic / Gen1",
                  "target": "https://allesebike.de/products/bosch-gen-1-4-tuning-yolobox-pro-50-km-h-ein-und-ausschaltbar"},
                  { "imageSource": "https://i.ebayimg.com/images/g/lNMAAOSwgbliwlE2/s-l1600.jpg",
                  "target": "https://allesebike.de/products/yamaha-giant-neue-motoren-tuning-yolobox-50-km-h"},
                  { "imageSource": "https://www.offbeatbikes.co.uk/wp-content/uploads/2023/03/Bosch-eBike-smart-system-MY22-EN_CMYK_left-2048x893.jpg",
                    "target": "https://en.wikipedia.org/wiki/Bosch_(company)"},
                  { "imageSource": "https://commons.wikimedia.org/wiki/Category:Bafang#/media/File:Chefferie_of_Bafang_-_panoramio.jpg",
                    "text": "lalala lalalal lalala hi lol",
                    "target": "ReturnAction"},
                  { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Bosch_logo.png",
                    "text": "Ein/Ausschaltbar ß?!",
                    "target":"https://allesebike.de/products/bosch-gen-1-4-tuning-yolobox-pro-50-km-h-ein-und-ausschaltbar"}
              ]
              }}
          },
            { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Yamaha-Logo.png",
            "target": "https://allesebike.de/products/yamaha-giant-neue-motoren-tuning-yolobox-50-km-h"},
            { "imageSource": "https://www.clker.com/cliparts/Q/d/l/A/K/L/shop-online-button-md.png",
              "target": "ReturnAction",
              "text": "zurück"},
            { "imageSource": "https://commons.wikimedia.org/wiki/Category:Bafang#/media/File:Chefferie_of_Bafang_-_panoramio.jpg",
              "text": "lalala lalalal lalala hi lol",
              "target": "https://allesebike.de/products/bafang-ebike-tuning-yolobox-50-km-h-fur-3-pin-speed-sensor"},
            { "imageSource": "https://upload.wikimedia.org/wikipedia/commons/c/c3/Bosch_logo.png",
              "text": "Ein/Ausschaltbar ß?!",
              "target":"https://allesebike.de/products/bosch-gen-1-4-tuning-yolobox-pro-50-km-h-ein-und-ausschaltbar"}
        ]
        }}}
  ]  
  }
};

        function fillOptions(gridElementsArray) {
            var optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = ""; // Clear previous content

            // Iterate over GridElementsArray and create HTML elements
            gridElementsArray.forEach(function(item) {
              //  button.innerHTML = "<div onclick='myFunction(" + JSON.stringify(item) + ")' class='panel'><img class='logo' src='" + item.imageSource + "' alt=''><p id='label'>" + item.text + "</p></div>";
                
                // Add button to optionsDiv
                text = item.text ? item.text : ""
                optionsDiv.innerHTML = optionsDiv.innerHTML + "<div onclick='myFunction(" + JSON.stringify(item) + ")' class='panel'><img class='logo' src='" + item.imageSource + "' alt=''><p id='label'>" + text + "</p></div>";
            });
        }

        function myFunction(item) {
            if (item.target === "ReturnAction") {
                goBack();
            } else if (typeof item.target === 'string') {
                window.location.href = item.target;
            } else if (item.target && item.target.SectionContent && item.target.SectionContent.GridElementsArray) {
                fillOptions(item.target.SectionContent.GridElementsArray);
                updateQuestion(item.target.SectionContent.title);
                document.getElementById('backButton').style.display = 'block'; // Show the back button
            }
        }

        // Function to update question text
        function updateQuestion(title) {
            document.getElementById('question').innerHTML = title;
        }

        // Call functions to initialize options and question
        fillOptions(jsonData.SectionContent.GridElementsArray);
        updateQuestion(jsonData.SectionContent.title);

        function goBack() {
            var initialGridElements = jsonData.SectionContent.GridElementsArray;
            fillOptions(initialGridElements);
            updateQuestion(jsonData.SectionContent.title);

            var progressBar = document.querySelector('.progress-step');
            progressBar.style.width = '33.33%'; // Update progress to step 1
            document.getElementById('backButton').style.display = 'none'; // Hide the back button again
        }
    </script>
</body>
</html>


